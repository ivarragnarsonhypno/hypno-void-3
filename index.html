<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HYPNOS Visual Terminal</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body, html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #000;
      color: #fff;
      font-family: 'Inter', sans-serif;
      cursor: none;
    }

    /* SECOND PAGE: EXACT screenshot look */
    .word-layer {
      position: fixed;
      inset: 0;
      display: grid;
      place-items: center;
      z-index: 30;
      text-align: center;
      pointer-events: none;
    }

    .strobe-text {
      font-size: 6vw;       /* matches the feel of your ref */
      font-weight: 400;     /* Inter Regular */
      letter-spacing: 0;
      text-transform: none;
      color: #ffffff;
      text-shadow: none;
      user-select: none;
      line-height: 1;
    }

    /* Modal */
    .modal-bg {
      position: fixed;
      inset: 0;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: auto;
      overflow: hidden;
      background: radial-gradient(1200px 900px at 15% 20%, rgba(255, 0, 128, 0.30), transparent 55%),
                  radial-gradient(1000px 800px at 80% 30%, rgba(255, 140, 0, 0.25), transparent 55%),
                  radial-gradient(900px 700px at 50% 85%, rgba(140, 0, 255, 0.20), transparent 60%),
                  #060006;
    }

    /* HOT animated blobs */
    .hot-blob {
      position: absolute;
      width: 520px;
      height: 520px;
      border-radius: 9999px;
      filter: blur(50px);
      opacity: 0.85;
      mix-blend-mode: screen;
      animation: floaty 7s ease-in-out infinite;
    }

    .blob-1 {
      left: -120px;
      top: -140px;
      background: radial-gradient(circle at 30% 30%, #ff2bd6, transparent 60%),
                  radial-gradient(circle at 70% 70%, #ff6a00, transparent 60%);
      animation-duration: 8s;
    }

    .blob-2 {
      right: -160px;
      top: 60px;
      background: radial-gradient(circle at 30% 30%, #ff003d, transparent 60%),
                  radial-gradient(circle at 70% 70%, #ffd000, transparent 60%);
      animation-duration: 9s;
      animation-delay: -2s;
    }

    .blob-3 {
      left: 20%;
      bottom: -220px;
      width: 640px;
      height: 640px;
      background: radial-gradient(circle at 30% 30%, #8f00ff, transparent 60%),
                  radial-gradient(circle at 70% 70%, #ff00a8, transparent 60%);
      animation-duration: 10s;
      animation-delay: -3s;
    }

    @keyframes floaty {
      0%, 100% { transform: translate(0, 0) scale(1); }
      50%      { transform: translate(30px, -24px) scale(1.04); }
    }

    /* Glass card */
    .hot-card {
      position: relative;
      z-index: 2;
      width: min(520px, 92vw);
      padding: 46px 40px;
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,0.12);
      background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04));
      box-shadow:
        0 22px 70px rgba(0,0,0,0.55),
        0 0 0 1px rgba(255,255,255,0.04) inset;
      backdrop-filter: blur(14px);
    }

    .hot-title {
      font-weight: 700;
      letter-spacing: 0.02em;
      color: #fff;
      text-shadow: 0 0 18px rgba(255, 0, 190, 0.35);
    }

    .hot-sub {
      color: rgba(255,255,255,0.70);
      letter-spacing: 0.22em;
      text-transform: uppercase;
      font-weight: 600;
      font-size: 12px;
    }

    /* HOT CTA */
    .hot-btn {
      width: 100%;
      padding: 16px 18px;
      border-radius: 16px;
      font-weight: 800;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #0b0010;
      background: linear-gradient(90deg, #ff2bd6, #ff6a00, #ffd000);
      box-shadow:
        0 18px 40px rgba(255, 70, 0, 0.25),
        0 0 0 1px rgba(255,255,255,0.25) inset;
      transition: transform 160ms ease, filter 160ms ease, opacity 160ms ease;
      cursor: pointer;
    }

    .hot-btn:hover { transform: translateY(-1px); filter: brightness(1.05) saturate(1.08); }
    .hot-btn:active { transform: translateY(0px); filter: brightness(0.98); }

    .hot-btn[disabled] {
      opacity: 0.45;
      cursor: wait;
      filter: grayscale(0.25);
    }

    /* Hidden YouTube container */
    #video-container {
      position: absolute;
      width: 1px;
      height: 1px;
      opacity: 0;
      pointer-events: none;
      overflow: hidden;
    }

    /* Icon-only audio toggle (SECOND PAGE ONLY) */
    #toggleMute {
      position: fixed;
      bottom: 22px;
      right: 22px;
      z-index: 200;
      width: 46px;
      height: 46px;
      border-radius: 9999px;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(255,255,255,0.92);
      color: #0a0a0a;
      box-shadow: 0 14px 35px rgba(0,0,0,0.25);
      cursor: auto; /* keep visible cursor on button */
      user-select: none;
      transition: transform 160ms ease, background 160ms ease;
    }

    #toggleMute:hover { transform: translateY(-1px); background: #fff; }
    #toggleMute:active { transform: translateY(0); }
  </style>
</head>

<body id="mainBody">

  <!-- YouTube Player -->
  <div id="video-container">
    <div id="player"></div>
  </div>

  <!-- HOT Start Modal -->
  <div id="startModal" class="modal-bg">
    <div class="hot-blob blob-1"></div>
    <div class="hot-blob blob-2"></div>
    <div class="hot-blob blob-3"></div>

    <div class="hot-card text-center">
      <div class="hot-sub mb-4">Deep Spectrum Protocol</div>
      <h1 class="hot-title text-5xl mb-6">HYPNOS</h1>

      <div class="text-sm text-white/70 mb-10 leading-relaxed">
        Enter when you're ready.
      </div>

      <button id="startButton" class="hot-btn" disabled>
        LOADING PROTOCOL...
      </button>
    </div>
  </div>

  <!-- SECOND PAGE content -->
  <div class="word-layer">
    <h2 id="strobeWord" class="strobe-text">Ask</h2>
  </div>

  <!-- Icon-only audio toggle (no label) -->
  <button id="toggleMute" aria-label="Toggle audio">ðŸ”Š</button>

  <script>
    const body = document.getElementById('mainBody');
    const wordEl = document.getElementById('strobeWord');
    const modal = document.getElementById('startModal');
    const startBtn = document.getElementById('startButton');
    const muteBtn = document.getElementById('toggleMute');

    let player = null;
    let apiReady = false;

    const VIDEO_ID = 'D6JUpHcH1BA';

    // Load YouTube IFrame API
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    const safeOrigin = (location.origin && location.origin !== "null") ? location.origin : undefined;

    // Must be global
    window.onYouTubeIframeAPIReady = function () {
      player = new YT.Player('player', {
        height: '0',
        width: '0',
        videoId: VIDEO_ID,
        playerVars: {
          autoplay: 1,
          controls: 0,
          disablekb: 1,
          enablejsapi: 1,
          playsinline: 1,
          loop: 1,
          playlist: VIDEO_ID,
          modestbranding: 1,
          rel: 0,
          origin: safeOrigin,
          widget_referrer: location.href
        },
        events: {
          onReady: onPlayerReady
        }
      });
    };

    function onPlayerReady() {
      apiReady = true;

      // Autoplay muted is allowed
      try {
        player.mute();
        player.setVolume(100);
        player.playVideo();
      } catch (e) {}

      startBtn.textContent = "ENTER VOID";
      startBtn.disabled = false;
    }

    function setSecondPageExactLook() {
      // EXACT screenshot background + centered "Ask"
      body.style.backgroundColor = "#D524EE";
      wordEl.textContent = "Ask";
    }

    function enterVoid() {
      if (!apiReady || !player) return;

      modal.style.display = "none";
      setSecondPageExactLook();

      // Show audio toggle on second page only
      muteBtn.style.display = "flex";

      // User gesture â†’ unmute + play (works on GitHub Pages)
      try {
        player.unMute();
        player.setVolume(100);
        player.playVideo();
        muteBtn.textContent = "ðŸ”Š";
      } catch (e) {}
    }

    startBtn.addEventListener('click', enterVoid);

    muteBtn.addEventListener('click', () => {
      if (!player) return;
      if (player.isMuted()) {
        player.unMute();
        player.setVolume(100);
        muteBtn.textContent = "ðŸ”Š";
      } else {
        player.mute();
        muteBtn.textContent = "ðŸ”‡";
      }
    });

    // Keyboard shortcuts:
    // Space = play/pause, M = mute toggle
    document.addEventListener('keydown', (e) => {
      if (!player) return;

      if (e.code === "Space") {
        e.preventDefault();
        const state = player.getPlayerState();
        if (state === YT.PlayerState.PLAYING) player.pauseVideo();
        else player.playVideo();
      }

      if (e.code === "KeyM") {
        muteBtn.click();
      }
    });

    // Default the second page base text (will be shown after enter)
    wordEl.textContent = "Ask";
  </script>
</body>
</html>
